{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$();\nimport { useReducer, useEffect, useState } from \"react\";\nimport { apiGet } from \"./config\";\nfunction showsReducer(prevState, action) {\n  switch (action.type) {\n    case \"ADD\":\n      {\n        return [...prevState, action.showId];\n      }\n    case \"REMOVE\":\n      {\n        return prevState.filter(showId => showId !== action.showId);\n      }\n    default:\n      return prevState;\n  }\n}\nfunction usePersistentReducer(reducer, intialState, key) {\n  _s();\n  const [state, dispatch] = useReducer(reducer, intialState, intial => {\n    const persisted = localStorage.getItem(key);\n    return persisted ? JSON.parse(persisted) : intial;\n  });\n  useEffect(() => {\n    localStorage.setItem(key, JSON.stringify(state));\n  }, [state, key]);\n  return [state, dispatch];\n}\n_s(usePersistentReducer, \"XStJqF7F09aht/JkpKz/HpJvZiw=\");\nexport function useShows() {\n  _s2();\n  let key = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"shows\";\n  return usePersistentReducer(showsReducer, [], key);\n}\n_s2(useShows, \"HuPHa/ISVOim4cbQcF96io0NvfA=\", false, function () {\n  return [usePersistentReducer];\n});\nexport function useLastQuery() {\n  _s3();\n  let key = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"lastQuery\";\n  const [input, setInput] = useState(() => {\n    const persisted = sessionStorage.getItem(key);\n    return persisted ? JSON.parse(persisted) : \"\";\n  });\n  const setPersistedInput = newState => {\n    setInput(newState);\n    sessionStorage.setItem(key, JSON.stringify(newState));\n  };\n  return [input, setPersistedInput];\n}\n_s3(useLastQuery, \"prVxINScwm+8vuKzR5FaAvZVuhM=\");\nconst reducer = (prevState, action) => {\n  switch (action.type) {\n    case \"FETCH_SUCCESS\":\n      {\n        return {\n          isLoading: false,\n          error: null,\n          show: action.show\n        };\n      }\n    case \"FETCH_FAILED\":\n      {\n        return {\n          ...prevState,\n          isLoading: false,\n          error: action.error\n        };\n      }\n    default:\n      return prevState;\n  }\n};\nexport function useShow(showid) {\n  _s4();\n  const [{\n    show,\n    isLoading,\n    error\n  }, dispatch] = useReducer(reducer, {\n    show: null,\n    isLoading: true,\n    error: null\n  });\n  useEffect(() => {\n    let isMounted = true;\n    apiGet(`/shows/${showid}?embed[]=seasons&embed[]=cast`).then(results => {\n      if (isMounted) {\n        dispatch({\n          type: \"FETCH_SUCCESS\",\n          show: results\n        });\n      }\n    }).catch(err => {\n      if (isMounted) {\n        dispatch({\n          type: \"FETCH_FAILED\",\n          error: err.message\n        });\n      }\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, [id]);\n}\n_s4(useShow, \"NyDprEY6bpBHdHtjTEftVMYd1ZA=\");","map":{"version":3,"names":["useReducer","useEffect","useState","apiGet","showsReducer","prevState","action","type","showId","filter","usePersistentReducer","reducer","intialState","key","state","dispatch","intial","persisted","localStorage","getItem","JSON","parse","setItem","stringify","useShows","useLastQuery","input","setInput","sessionStorage","setPersistedInput","newState","isLoading","error","show","useShow","showid","isMounted","then","results","catch","err","message","id"],"sources":["/Users/saarimkhan/Desktop/Box Office App/box-office/Box-office-app/src/misc/custom-hooks.js"],"sourcesContent":["import { useReducer, useEffect, useState } from \"react\";\nimport { apiGet } from \"./config\";\n\nfunction showsReducer(prevState, action) {\n  switch (action.type) {\n    case \"ADD\": {\n      return [...prevState, action.showId];\n    }\n    case \"REMOVE\": {\n      return prevState.filter((showId) => showId !== action.showId);\n    }\n    default:\n      return prevState;\n  }\n}\nfunction usePersistentReducer(reducer, intialState, key) {\n  const [state, dispatch] = useReducer(reducer, intialState, (intial) => {\n    const persisted = localStorage.getItem(key);\n    return persisted ? JSON.parse(persisted) : intial;\n  });\n\n  useEffect(() => {\n    localStorage.setItem(key, JSON.stringify(state));\n  }, [state, key]);\n\n  return [state, dispatch];\n}\n\nexport function useShows(key = \"shows\") {\n  return usePersistentReducer(showsReducer, [], key);\n}\n\nexport function useLastQuery(key = \"lastQuery\") {\n  const [input, setInput] = useState(() => {\n    const persisted = sessionStorage.getItem(key);\n    return persisted ? JSON.parse(persisted) : \"\";\n  });\n  const setPersistedInput = (newState) => {\n    setInput(newState);\n    sessionStorage.setItem(key, JSON.stringify(newState));\n  };\n  return [input, setPersistedInput];\n}\n\nconst reducer = (prevState, action) => {\n  switch (action.type) {\n    case \"FETCH_SUCCESS\": {\n      return { isLoading: false, error: null, show: action.show };\n    }\n\n    case \"FETCH_FAILED\": {\n      return { ...prevState, isLoading: false, error: action.error };\n    }\n\n    default:\n      return prevState;\n  }\n};\n\nexport function useShow(showid) {\n  const [{ show, isLoading, error }, dispatch] = useReducer(reducer, {\n    show: null,\n    isLoading: true,\n    error: null,\n  });\n\n  useEffect(() => {\n    let isMounted = true;\n\n    apiGet(`/shows/${showid}?embed[]=seasons&embed[]=cast`)\n      .then((results) => {\n        if (isMounted) {\n          dispatch({ type: \"FETCH_SUCCESS\", show: results });\n        }\n      })\n      .catch((err) => {\n        if (isMounted) {\n          dispatch({ type: \"FETCH_FAILED\", error: err.message });\n        }\n      });\n\n    return () => {\n      isMounted = false;\n    };\n  }, [id]);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}